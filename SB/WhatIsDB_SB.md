# DB

## 데이터 모델링

- 데이터 흐름을 도식화하는 과정
- 가시화 / 명세화 / 구조화된 틀 제공 / 문서화 / 다양한 관점 제공 / 구체화
- 포괄적이고 최적화된 데이터 모델은 간결하고 논리적인 DB 생성

  → 중복 제거, 스토리지 요구사항 완화 및 효율적인 검색 지원

    - DB(Database) : 여러 사람이 공유하고 사용할 목적으로 통합 관리되는 정보(데이터)의 집합
- 모든 이해관계자(개발자, DBA, 관련 업무 전문가)들이 완성된 모델을 정확히 해석할 수 있어야 함
- **엔티티, 관계, 속성**의 3요소로 이루어짐

[참고](https://www.sap.com/korea/insights/what-is-data-modeling.html)

## 데이터 모델링 3단계

1. **개념적 모델링** : 엔티티와 속성을 도출하고 ERD 작성 → 업무 중심적, 포괄적
2. **논리적 모델링** : 식별자를 도출하고 속성과 관계 등 정의 / 데이터 모델링 완료

   → 정규화를 수행하여 데이터 모델의 독립성과 재사용성 확보

3. **물리적 모델링** : DB 구축 / 성능 및 보안 등 물리적인 성격 고려

## ERD(Entity Relationship Diagram)

- 엔티티들의 관계를 시각적으로 나타낸 도표
- 1) **개체(Entity)** : ⬜️ 2) **관계(Relation)** : 🔶 3) **속성(Attribute)** : ⚪️

### 개체(Entity)

- 사람, 사물, 장소, 개념 또는 사건 등 데이터의 집합 / 인스턴스의 집합
- 두 개 이상의 속성을 가짐
- 명명 규칙
    - 현업 업무에서 사용하는 용어
    - 약어 지양
    - 단수 명사
    - 유일성 보장
    - 명확성

### Entity 특징

- 식별자 - 유일한 식별자가 있어야 함
- 인스턴스 집합 - 2개 이상의 인스턴스가 있어야 함
- 속성 - 반드시 속성을 가지고 있어야 함
- 관계 - 다른 엔티티와 최소 한 개 이상의 관계를 가져야 함
    - 공통 코드, 통계성 예외
- 업무 - 반드시 업무에서 관리되어야 할 집합이어야 함

### Entity 종류

- **유무형에 따른 분류**
    - 유형 엔티티 : 물리적 형태가 있고 지속적으로 활용되는 엔티티
    - 개념 엔티티 : 물리적 형태가 없는 엔티티
- **발생시점에 따른 분류**
    - 기본 엔티티(Key Entity) : 독립적으로 생성되는 엔티티
    - 중심 엔티티(Main Entity) : 기본 엔티티와 행위 엔티티의 중간에 존재하는 엔티티
    - 행위 엔티티(Active Entity, = 사건 엔티티) : 2개 이상의 부모 엔티티로부터 발생, 비즈니스 프로세스를 실행하면서 생성되는 엔티티
        - 지속적으로 정보가 추가되고 변경되어 데이터 양이 가장 많음

### 속성(Attribute)

- 엔티티가 가지는 최소 의미 단위
- 인스턴스의 구성 요소

### Attribute 특징

- 업무에서 필요하고 관리하고자 하는 정보
- 주 식별자에 함수적으로 종속됨
    - 함수 종속 : X → Y 일 경우 X가 Y를 함수적으로 결정함(X값을 알 경우 Y값 식별 가능, X값에 따라 Y값이 달라짐), Y는 X에 함수적으로 종속됨
- 속성값 하나만 가짐 (하나 이상일 경우 정규화 필요)
- Domain(도메인) : 속성이 가질 수 있는 값의 범위

### Attribute 종류

- **특성에 따른 분류**
    - 기본 속성 : 비즈니스 프로세스에서 도출되는 본래의 속성
    - 설계 속성 : 데이터 모델링 과정에서 업무 규칙화를 위해 발생하는 속성, 모델링을 위해 생성하거나 변형하여 정의함 ex. 일련번호
    - 파생 속성 : 다른 속성의 영향을 받아 발생하는 속성 ex. 집계
- **분해 가능 여부에 따른 분류**
    - 단일 속성 : 하나의 의미
    - 복합 속성 : 여러 의미, 단일 속성으로 분해 가능 ex. 주소
    - 단일값 속성 : 하나의 값
    - 다중값 속성 : 여러 값, 엔티티로 분해 가능
- **엔티티 구성 방식에 따른 분류**
    - 기본키 속성 : 엔티티를 식별할 수 있는 속성
    - 외래키 속성 : 다른 엔티티와의 관계에서 포함된 속성
    - 일반 속성 : 엔티티에 포함되고 PK나 FK 속성이 아닌 속성

### 관계(Relation)

- 엔티티 간의 논리적인 관련성 / 동사형
- 관계 표기법
    - 관계명(Membership) : 엔티티가 관계에 참여하는 형태

      → 두 가지 관점으로 표현

        - ex. 부서가 직원을 포함한다 / 직원이 부서에 소속된다
    - 관계차수(Degree / Cardinality) : 관계에서 참여자의 수 표현
        - 1:M / 1:1 / M:M
    - 관계선택사양(Optionality) : 엔티티가 관계에 항상 참여하는지 참여할 수도 있는지 필수(Mandatory)와 선택(Optional)으로 표기
        - 필수 : | , 선택 : O

[https://dataonair.or.kr/db-tech-reference/d-guide/da-guide/?mod=document&uid=283](https://dataonair.or.kr/db-tech-reference/d-guide/da-guide/?mod=document&uid=283)

→ 그림 많음!

## DBMS(Database Management System)

- DB를 관리하고 운영하는 소프트웨어
- 공유 저장소(서버)를 구축하고 사용자들에게 접근 정보를 공유하여 데이터를 처리할 수 있는 인터페이스 / 복구 기능 / 보안성 기능 제공

### DBMS의 장점

- 데이터 중복 최소화
- 데이터 일관성 유지
- 정확성, 무결성, 보안성 유지
- 사용자 중심의 데이터 처리
- 데이터 표준화 적용 가능
- 데이터 접근 용이
- 데이터 저장 공간 공유로 인한 절약

### DBMS의 단점

- DBA(데이터베이스 전문가) 필요
- DBMS 구축 서버 필요 및 유지비
- 데이터 백업과 복구의 어려움
- 시스템의 복잡성
- 대용량 데이터 처리 어려움

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/89e0c483-5381-4638-86f8-76beb1583686/Untitled.png)

### 식별자(Identifier)

- 여러 개의 집합(인스턴스)체를 담고 있는 하나의 테이블에서 각각을 구분할 수 있는 논리적인 개념이자 구분자

### 튜플(Tuple)

- 테이블의 행(Row) = 레코드(Record)
- 중복 되는 값 가질 수 있음 ex. 학년 = 3
- 튜플의 수를 **Cardinality** 라고 함

### 속성(Attribute)

- 테이블의 열(Column) = 필드(Field)
- 속성의 수를 **Degree** 라고 함

### 릴레이션(Relation = table)

- RDB에서 정보를 구분하여 저장하는 기본 단위

### 키(Key)

- 테이블에서 행의 식별자로 이용되는 식별자

### 도메인(Domain)

- 하나의 속성(Attribute)가 취할 수 있는 같은 타입의 원자값의 집합
- ex. 성별 속성의 도메인은 남 / 여
- ex. 나이 속성의 도메인은 숫자 값만 입력 가능

[http://www.incodom.kr/DBMS](http://www.incodom.kr/DBMS)

# DBMS 유형

## RDBMS(Relational DBMS)

- 관계형 데이터베이스 관리 시스템
- 테이블 간의 관계를 직관적으로 파악 가능, 상호작용 시 SQL 사용
- 고정된 행과 열로 구성된 테이블에 데이터 저장
- 각 열은 하나에 속성에 관한 정보 저장, 행에는 각 열의 데이터 형식에 맞는 데이터 저장
- 테이블의 구조와 데이터 타입 등을 사전에 정의하고 알맞은 형식의 데이터만 삽입 가능
- 수직적 확장 가능, 하드웨어의 성능을 많이 이용하고, 여러 서버에 걸쳐서 데이터베이스의 관계 정의 가능 → 복잡하고 시간 많이 듦
- 대표적인 RDBMS
    - MySQL
    - Oracle
    - SQLite
    - MariaDB
    - PostgresSQL

## NoSQL DBMS

- 표 형식이 아닌 다른 방식으로 데이터 저장
- 데이터가 고정되어 있지 않은 데이터베이스
- 유연한 스키마 제공
- 대량의 데이터와 높은 사용자 부하에서도 손쉽게 확장 가능
- Schema on read : 데이터를 읽어올 때 스키마에 따라 데이터를 읽어옴
- 수평적 확장 가능, RDBMS 보다 상대적으로 비용이 저렴

## NoSQL 데이터베이스 유형

### Key-Value 타입

- 속성을 Key-Value 쌍으로 나타내는 데이터를 배열의 형태로 저장
    - Key : 속성 이름 / Value : 속성에 연결된 데이터 값
- 대표적인 Key-Value 타입 DBMS : Redis, Dynamo 등

### 문서형(Document)

- 데이터를 테이블이 아닌 문서처럼 저장하는 데이터베이스
- JSON과 유사한 형식의 데이터를 문서화하여 저장
- 각각의 문서는 하나의 속성에 대한 데이터를 가지고 있고, 컬렉션이라고 하는 그룹으로 묶어서 관리
- 대표적인 문서형 DBMS : MongoDB

### Wide-Column Store

- 데이터베이스의 열(Column)에 대한 데이터를 집중적으로 관리
- 각 열에는 Key-Value 형식으로 데이터 저장, 컬럼 패밀리(Column Families)라고 하는 열의 집합체 단위로 데이터 처리 가능
- 하나의 행에 많은 열을 포함할 수 있어서 유연성 높음
- 규모가 큰 데이터 분석에 주로 사용
- 대표적인 Wide-Column DBMS : Cassandra, HBase

### 그래프(Graph)

- 자료구조의 그래프와 비슷한 형식으로 데이터 간의 관계를 구성
- 노드(nodes)에 속성(entity)별로 데이터 저장
    - 각 노드 간 관계는 선(edge)으로 표현
- 대표적인 그래프 DBMS : Neo4J, InfiniteGraph

[https://hanamon.kr/데이터베이스-sql-vs-nosql/](https://hanamon.kr/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-sql-vs-nosql/)

## SQL(Structured Query Language)

- RDBMS에서 사용하는 전용 프로그래밍 언어

### SQL의 종류

- DDL(Data Definition Language) : 데이터 정의어
    - 관계형 데이터베이스의 구조 정의
    - CREATE, ALTER, DROP, RENAME
- DML(Data Manipulation Language) : 데이터 조작어
    - 테이블에서 데이터 입력, 수정, 삭제, 조회
    - INSERT, UPDATE, DELETE, SELECT
- DCL(Data Control Language) : 데이터 제어어
    - 사용자에게 권한 부여하거나 회수함
    - GRANT, REVOKE, TRUMCATE
- TCL(Transaction Control Language) : 트랜잭션 제어 명령어
    - COMMIT, ROLLBACK, SAVEPOINT

## Transaction(트랜잭션)

- DB의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업 단위
- DB 시스템에서 병행 제어 및 회복 작업 시 처리되는 작업의 논리적 단위
- 사용자가 시스템에 대한 요구 시 시스템이 응답하기 위한 상태 변환과정의 작업 단위로 사용됨

### 트랜잭션의 특성

- 데이터의 무결성을 보장하기 위한 트랜잭션의 특성
    - 원자성(Atomicity) : 트랜잭션의 연산은 DB에 모두 반영되도록 완료되거나 전혀 반영되지 않도록 복구되어야 함 / 트랜잭션 내의 모든 명령은 반드시 완벽히 수행되어야 함
    - 일관성(Consistency) : 트랜잭션이 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환함. 트랜잭션 수행 전과 후 상태가 같아야 함
    - 독립성(Isolation) : 둘 이상의 트랜잭션이 동시에 실행되는 경우 어느 하나의 트랜잭션 실행 중에 다른 트랜잭션의 연산이 끼어들 수 없음
    - 영속성, 지속성(Durability) : 성공적으로 완료된 트랜잭션의 결과는 시스템이 고장나더라도 영구적으로 반영되어야 함

[https://hongong.hanbit.co.kr/데이터베이스-이해하기-databasedb-dbms-sql의-개념/](https://hongong.hanbit.co.kr/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-databasedb-dbms-sql%EC%9D%98-%EA%B0%9C%EB%85%90/)