# What is Kernel

## What is Kernel
커널은 운영체제 중 항상 메모리에 올라가 있는다. 하드웨어와 응용 프로그램 사이에서 인터페이스를 제공하는 역할을 하며 컴퓨터 자원들을 관리하는 역할을 한다. 

커널은 항상 컴퓨터 자원을 바라만 보고 있기에 사용자와의 상호작용은 지원하지 않는다. 그래서 사용자와의 직접적인 상호작용을 위해 쉘이라는 명령어 해석기 등의 프로그램을 제공한다.

## How to manage resource
커널의 가장 큰 목표는 컴퓨터 자원과 추상화 자원을 관리하는 것이다. 
> 추상화란 물리적으로 하나뿐인 하드웨어를 여러 사용자들이 번걸아 사용할 수 있도록 마치 여러 개처럼 보이게 하는 기술이다. 

즉, 커널이 관리함에 따라 각 사용자들이 하나의 하드웨어를 독점하는 것처럼 느껴질 수 있돌독 한다. 

CPU -> Task, Process : 물리적 자원의 CPU를 추상적 자원인 Task로 제공한다. 

메모리 -> Page, Segment : 물리적 자원인 메모리를 추상적 자원인 Page, Segment로 제공한다. 

디스크 -> File : 물리적 자원인 디스크를 추상적 자원인 File로 제공한다.

네트워크 -> Socket : 물리적 자원인 네트워크 장치를 추상적 자원인 Socket으로 제공한다. 

Device Driver : 각종 외부 장치에 대한 접근

Interrupt Handling : 인터럽트 핸들러

I/O Communication : 입출력 통신 관리

## Kernel as interface

커널은 하드웨어와 사용자 응용 프로그램 사이에 위치해 있어, 둘 사이의 인터페이스 역할을 한다. 

위에서 말한 커널 구성요소들이 존재하는 공간을 커널 스페이스라고 할 수 있다. 커널 스페이스 위에서는 사용자로 여겨지는 유저 스페이스가 있으며 여기에는 Task, Process 들이 존재한다. 이 유저 스페이스와 커널 스페이스 사이에는 보이지 않지만 시스템 콜 인터페이스가 있다. 유저 스페이스의 Task 나 Process들이 커널이 관리하는 자원에 접근해야 할 필요가 있을 때 시스템 콜 인터페이스를 통해 커널 스페이스의 자원관리자에게 요청이 전달되는 방식이다. 그러면 커널은 사용자 요청에 맞는 하드웨어에게 명령을 전달하고 작업을 수행하는 역할을 한다. 

> 커널은 사용자가 시스템 콜을 통해 컴퓨터 자원을 사용할 수 있게 해주는 자원 관리자라고 할 수 있다.

## Kernel and OS ..

커널은 운영체제의 핵심 부분으로, 커널 + 어플리케이션 = 운영체제이다. 그러므로 운영체제는 유저 스페이스와 커널 스페이스로 나뉠 수 있다. 

리눅스는 File system utilities, Windowing Systems, Graphical System, Text Editors, compilers 등과 같은 사용자 어플리케이션을 포함하지 않고 핵심기능만을 포함하기 때문에 커널이라고 할 수 있다.

## Type of Kernel

### 모놀리식 커널

모놀리식 커널은 개념적으로 알고 있는 커널로, 어플리케이션을 제외한 모든 시스템 서비스들 ( VFS, IPC, File System 등 )을 커널이 직접 처리하는 방식이다. 각 서비스들은 커널 내부의 여러 계층에서 관리된다. 이 서비스들을 사용자가 사용하려면 시스템 콜을 사용하면 된다.

모널리식 커널은 커널이 많은 것을 관리하기 때문에 커널의 크기가 크고, 하나의 오류가 전체 시스템에 영향을 끼칠 수 있다는 단점이 있다. 하지만 커널 내부에서 서비스들이 서로 시스템 자원을 공유하며 효율적으로 관리할 수 있고, 내부 서비스를 직접 커널이 수행하기에 빠른 처리속도를 가지는 장점이 있다.

대표적인 모놀리식 커널에는 유닉스, 임베디드 리눅스 등이 있다.

### 마이크로 커널

마이크로 커널은 기존의 모놀리식 커널에서 핵심 서비스만( 프로세스, 메모리, 네트워크 관리 )을 남두고 나머지는 제외하여 가볍게 만든 커널이다. 기존의 모놀리식 커널이 가지고 있던 시스템 서비스들( VFS, IPC 등 )은 개별적인 서버의 형태로 존재한다.

마이크로 커널은 최소화하고 핵심적인 서비스들만을 모아놓고 서버를 추가하는 방식의 구조여서 프로세스간 통신을 통해 대부분의 서비스가 수행된다. 따라서 메세지 전송에 따른 컨텍스트 스위칭이 많이 발생하고, 시스템 복잡도가 증가될수록 시스템 부하, 오버헤드가 증가하는 단점이 있다. 다만 서버를 추가하는 방식이기에 커널을 변경하지 않고 간단히 기능을 추가, 수정할 수 있고 프로세스가 각각의 서버 영역에서 수행되기 때문에 하나의 서비스가 다운되어도 다른 서비스에까지도 영향을 끼치지 않는 장점이 있다. 

대표적인 마이크로 커널에는 MacOS, Windows NT 등이 있다.

[커널에 대한 깔끔한 정리](https://minkwon4.tistory.com/295)