# How to execute java 

## 1. 자바실행 과정

자바로 프로그래밍 된 파일을 컴파일러가 .class 파일로 컴파일한다. 이후 이 코드를 JVM이 읽고 실행한다.

* 자바 바이트 코드

JVM이 이해할 수 있는 언어로 변환된 자바 소스 코드를 말한다. 자바 바이트 코드의 확장자는 .class 이며, JVM만 설치되어 있담녀 어떤 운영체제에서라도 실행될 수 있다.

### JVM

JVM은 자바 가상 기계로 OS 마다 따로 코드를 작성해야 하는 번거로움 없이 자바가 플랫폼에 독립적일 수 있게 만들어준다.

예를 들어, C 언어로 작성된 프로그램은 바로 기계어로 컴파일하므로 하드웨어에 맞게 컴파일 되어야 한다. 이를 플랫폼 종속적이다라고 한다. 반면 자바 프로그램은 중간 단계 언어로 컴파일 하여 JVM만 각 OS에 설치되어 있다면 하드웨어에 상관 없이 실행할 수 있다. 이를 플랫폼 독립적이라고 한다.

정리하면, JVM은 .class 파일을 로드하고 해석하며 메모리 등의 자원을 할당하고 관리하며 정보를 처리하는 작업을 하는 프로그램이다.

* Java compiler

자바 소스 파일을 JVM이 해석할 수 있는 자바 바이트 코드 ( .calss )로 변경한다. 

* Class loader

JVM 내로 .class 파일을 로드한다. 로딩된 .class 파일들은 Runtime Data Area에 배치된다. 

* Execution Engine

로딩된 클래스의 바이트 코드를 해석한다. 이 과정에서 바이트 코드가 바이너리 코드로 변경된다. 

* Runtime Data Area

JVM이 프로세스로써 수행되기 위해 OS로부터 할당받는 메모리 영역이다. 

### Runtime Data Area

* method area

모든 스레드에게 공유된다.

클래스 정보, 변수 정보, 메소드 정보, 정적 변수 정보, 상수 정보 등이 저장되는 영역이다.

* Heap Area

모든 스레드에게 공유된다.

new 명령어로 생성된 인스턴스와 객체가 저장되는 구역이다. 공간이 부족해지면 GC가 실행된다.

* Stack Area

각 스레드마다 하나씩 생성된다. 

메소드 안에서 사용되는 값들 ( 매개변수, 지역변수, 리턴 값 등 ) 이 저장되는 영역이다. 메소드가 호출될 때, LIFO 로 하나씩 생성되고 종료되면 LIFO 방식으로 하나씩 지워진다.

* PC Register

각 스레드마다 하나씩 생성된다. 

CPU의 register와 역할이 비슷하다. 현재 수행 중인 JVM 명령의 주소 값이 저장된다.

* Native Method Stack

각 스레드마다 하나씩 생성된다. 

다른 언어의 메소드 호출을 위해 할당되는 영역이다. 
