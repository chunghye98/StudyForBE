# Docker 용어 정리

## 1. Docker Engine

Client-Server 아키텍처를 따르는 어플리케이션이며, 호스트 시스템에 설치되어 기본적으로 3가지 구성요소를 갖고 있다.

* server

Dockered라는 Docker Demon을 통해 도커 이미지를 만들고 관리할 수 있다.

* REST API

Docker Demon에게 무엇을 할지 지시하는 용도로 사용된다.

* CLI

도커 명령어를 입력하는 데 사용되는 클라이언트이다.

## 2. 도커 객체

도커로 작업할 때 이미지, 컨테이너, 볼륨, 네트워크를 사용한다. 이것들을 모두 도커 객체라고 한다.

## 3. 도커 이미지

필요한 프로그램과 라이브러리, 소스를 설치한 뒤 만든 하나의 파일이다. 이미지는 컨테이너를 만드는 설명이 포함된 읽기 전용 템플릿으로 상태값을 가지지 않고 변하지 않는 특성이 있다. 

도커 이미지는 도커 허브에서 가져와서 사용하거나 Dockerfile을 사용하여 고유한 도커 이미지를 만들 수도 있다.
> 컨테이너를 실행시키기 위한 모든 사항들을 Dockerfile에 작성하면 된다.

정리하면, 도커 이미지는 컨테이너 실행에 필요한 모든 파일과 설정값을 가진 읽기 전용 템플릿이다.

이미지는 업데이터할 수 있으며, 

컨테이너 -> 이미지 -> 컨테이너 -> 이미지를 반복할 수 있다.

이러한 과정에서 도커는 레이어라는 개념을 사용한다.

기존 이미지 레이어 위에 read-write 레이어를 추가하는 방식으로 유니온 파일 시스템을 이요하여 여러 개의 레이어를 하나의 파일 시스템으로 사용할 수 있도록 한다. 
> 유니온 파일 시스템 : 읽기 전용 파일을 수정할 때, 쓰기가 가능한 파일을 임시로 생성하고 수정이 끝나는 경우 기존의 읽기 파일로 체되는 방식의 파일 시스템이다.

레이어아 쌓이는 방식으로 이미지가 만들어지기 때문에, 파일이 수정될 때마다 원본 이미지에 대한 중복을 없애고 수정된 값만을 관리한다.

## 4. 도커 컨테이너

이미지를 기반으로 독립된 공간에서 실행한 가상환경이다.

시스템 컨테이너와 어플리케이션 컨테이너 총 2가지로 나누어진다.

시스템 컨테이너는 운영체제 위에 하드웨어 가상화 없이 운영체제를 실행시킨다.

어플리케이션 컨테이너는 DB 등 필요한 프로그램만 도커로 별도 실행시킬 수 있다.

컨테이너는 오버헤드가 적기 때문에 가볍고 고속으로 작동하는 것이 특징이다. 다수의 컨테이너를 OS 커널에서 직접 구동하므로 훨씬 가볍게 OS 커널을 공유한다.

도커 이미지를 실행하면 컨테이너가 생성된다. 모든 어플리케이션 및 환경은 해당 컨테이너에서 실행된다. CLI 또는 도커 API 등을 통해 컨테이너를 실행, 중지, 삭제할 수 있다. 

## 5. 도커 데몬

도커 데몬은 도커의 API 요청을 수신하고 이미지, 컨테이너, 네트워크, 볼륨과 같은 도커 객체를 관리한다. 

## 6. 도커 레지스트리

도커 이미지를 업로드해 공유하는 저장소를 말한다. 도커의 공식 레지스트리인 도커 허브를 통해 다른 도커 사용자들의 이미지들을 가져올 수 있으며 doker pull, docker run 등의 CLI 명령어로 필요한 이미지를 가져올 수 있다.

CentOs, Ubuntu 등의 OS 이미지, MariaDB, MongoDB, Nginx와 같은 미들웨어 이미지, Node.js, Golan, OpenJDK 와 같은 플랫폼 이미지도 제공한다.

## 7. 도커 클라이언트

호스트에 명령을 내리는 인터페이스이며, 보통 터미널에서 CLI 명령어 기반으로 진행된다.

## 8. 도커 볼륨

도커 컨테이너를 생성하면 컨테이너의 데이터는 기본적으로 볼륨에 저장된다. 컨테이너를 제거하는 경우, 볼륨에 저장된 내부 데이터도 함께 사라지게 된다.

이러한 컨테이너의 생명주기와 상관없이 데이터를 호스트에 저장할 수 있는 기능이 있다. 볼륨의 설정을 호스트의 특정 폴더 경로를 마운트하는 방법이다. 

> 이게 내가 reactive 프로젝트에서 몽고디비 데이터를 data/db 폴더에 저장하는 건가보다.

## 9. 도커 네트워크

모든 격리된 컨테이너가 통신하는 통로이다. 도커에는 총 5가지의 네트워크 드라이버가 있다.

1. Bridge

컨테이너의 기본 네트워크 드라이버이다. 도커를 설치한 후 호스트의 네트워크 인터페이스를 보면 docker0라는 가상 인터페이스가 생긴다. docker0는 일반적인 가상 인터페이스가 아니며 도커 자체적으로 제공하는 드라이버로 어플리케이션이 독립형 컨테이너에서 실행될 대 이 네트워크를 사용한다.

2. Host

도커 컨테이너와 도커 호스트 간의 네트워크 격리를 제거한다. 

3. Overlay

컨테이너가 다른 도커 호스트에서 실행 중이거나 swaram 서비스가 여러 어플리케이션에 의해 형성될 경우에 사용된다.

4. None

모든 네트어킹을 비활성화한다.

5. Macvlan

물리적 주소처럼 보이도록 하기 위해 Mac 주소를 컨테이너에 할당한다. 네트워크 트래픽은 컨테이너 간 Mac주소를 통해 라우팅된다. 이 네트워크는 VM 설정을 마이그레이션 하는 동안 컨테이너를 물리적 장치처럼 보이게 하려는 경우에 사용된다.

[도커 용어 이해](https://artistdata.tistory.com/4?category=1182143)